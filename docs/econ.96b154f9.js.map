{"version":3,"sources":["econ.js"],"names":["happinessArray","yearSet","options","config","init","view","tooltip","vegaTooltip","Handler","call","renderer","vl","register","vega","vegaLite","d3","csv","happinessData","then","data","forEach","d","push","includes","year","drawGDPVegaLite","drawScatterVegaLite","selection2","selectSingle","fields","bind","radio","markPoint","filled","select","selection","encode","x","fieldQ","y","size","legend","symbolOpacity","color","fieldN","opacity","if","value","width","height","render","viewElement","document","getElementById","appendChild","transform","groupby","aggregate","average","as"],"mappings":"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","file":"econ.96b154f9.js","sourceRoot":"../src","sourcesContent":["/** Wenxuan Qi\n * Economy + Trust vs Happiness Score\n * The above code is the original code in this file.\n */ \nimport happinessData from '../static/happiness_percentage1.csv'\n\"use strict\";\n\nvar happinessArray = [];\nvar yearSet = [];\nconst options = {\n  config: {\n    // Vega-Lite default configuration\n  },\n  init: (view) => {\n    // initialize tooltip handler\n    view.tooltip(new vegaTooltip.Handler().call);\n  },\n  view: {\n    // view constructor options\n    // remove the loader if you don't want to default to vega-datasets!\n    //   loader: vega.loader({\n    //     baseURL: \"\",\n    //   }),\n    renderer: \"canvas\",\n  }\n};\n\nvl.register(vega, vegaLite, options);\n\nd3.csv(happinessData).then(function(data){\n  data.forEach(function(d) {\n    happinessArray.push(d);\n    if (!yearSet.includes(d.year)) {\n      yearSet.push(d.year);\n    }\n  })\n  drawGDPVegaLite();\n  drawScatterVegaLite();\n})\n\nfunction drawScatterVegaLite() {\n  const selection2 = vl.selectSingle('happiness')\n    .fields('year')\n    .init({year: yearSet[0]})\n    .bind(vl.radio(yearSet));\n  \n  return vl.markPoint({filled:true})\n    .data(happinessArray)\n    .select(selection)\n    .encode(\n      vl.x().fieldQ('Economy'),\n      vl.y().fieldQ('Happiness_Score'),\n      vl.size().fieldQ('Trust_Government_Corruption')\n               .legend({symbolOpacity: 0.7}),\n      vl.color().fieldN('Region')\n               .legend({symbolOpacity: 1}),\n      vl.opacity().if(selection2).value(0.1),\n      vl.tooltip(['Happiness_Score', 'Economy', 'Trust_Government_Corruption', 'Region'])\n    )\n    .width(500)\n    .height(300)\n    .render()\n    .then(viewElement => {\n      document.getElementById('view').appendChild(viewElement);\n    });\n  }\n  \nfunction drawGDPVegaLite() {\n  return vl.markPoint({filled:true})\n    .data(happinessArray)\n    .transform(\n      vl.groupby('Country')\n        .aggregate(vl.average('Happiness_Score').as('Average_Happiness_Score'), vl.average('Economy').as('Average_GDP'))  \n    )\n    .encode(\n      vl.x().fieldQ('Average_GDP'),\n        vl.y().fieldQ('Average_Happiness_Score'),\n      vl.tooltip(['Country','Average_GDP', 'Average_Happiness_Score'])\n    )\n    .width(500)\n    .height(400)\n    .render()\n    .then(viewElement => {\n      document.getElementById('GDPview').appendChild(viewElement);\n    });\n}  \n"]}