{"version":3,"sources":["econ.js"],"names":["happinessArray","yearSet","options","config","init","view","tooltip","vegaTooltip","Handler","call","renderer","vl","register","vega","vegaLite","d3","csv","happinessData","then","data","forEach","d","push","includes","year","drawScatterVegaLite","selection2","selectSingle","fields","bind","radio","markPoint","filled","select","encode","x","fieldQ","y","size","legend","symbolOpacity","color","fieldN","opacity","if","value","width","height","render","viewElement","document","getElementById","appendChild"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAIA;;;;AAJA;AACA;AACA;AACA;AAEA;;AAEA,IAAIA,cAAc,GAAG,EAArB;AACA,IAAIC,OAAO,GAAG,EAAd;AACA,IAAMC,OAAO,GAAG;AACdC,EAAAA,MAAM,EAAE,CACN;AADM,GADM;AAIdC,EAAAA,IAAI,EAAE,cAACC,IAAD,EAAU;AACd;AACAA,IAAAA,IAAI,CAACC,OAAL,CAAa,IAAIC,WAAW,CAACC,OAAhB,GAA0BC,IAAvC;AACD,GAPa;AAQdJ,EAAAA,IAAI,EAAE;AACJ;AACA;AACA;AACA;AACA;AACAK,IAAAA,QAAQ,EAAE;AANN;AARQ,CAAhB;AAkBAC,EAAE,CAACC,QAAH,CAAYC,IAAZ,EAAkBC,QAAlB,EAA4BZ,OAA5B;AAEAa,EAAE,CAACC,GAAH,CAAOC,6BAAP,EAAsBC,IAAtB,CAA2B,UAASC,IAAT,EAAc;AACvCA,EAAAA,IAAI,CAACC,OAAL,CAAa,UAASC,CAAT,EAAY;AACvBrB,IAAAA,cAAc,CAACsB,IAAf,CAAoBD,CAApB;;AACA,QAAI,CAACpB,OAAO,CAACsB,QAAR,CAAiBF,CAAC,CAACG,IAAnB,CAAL,EAA+B;AAC7BvB,MAAAA,OAAO,CAACqB,IAAR,CAAaD,CAAC,CAACG,IAAf;AACD;AACF,GALD;AAMAC,EAAAA,mBAAmB;AACpB,CARD;;AAUA,SAASA,mBAAT,GAA+B;AAC7B,MAAMC,UAAU,GAAGf,EAAE,CAACgB,YAAH,CAAgB,WAAhB,EAChBC,MADgB,CACT,MADS,EAEhBxB,IAFgB,CAEX;AAACoB,IAAAA,IAAI,EAAEvB,OAAO,CAAC,CAAD;AAAd,GAFW,EAGhB4B,IAHgB,CAGXlB,EAAE,CAACmB,KAAH,CAAS7B,OAAT,CAHW,CAAnB;AAKA,SAAOU,EAAE,CAACoB,SAAH,CAAa;AAACC,IAAAA,MAAM,EAAC;AAAR,GAAb,EACJb,IADI,CACCnB,cADD,EAEJiC,MAFI,CAEGP,UAFH,EAGJQ,MAHI,CAIHvB,EAAE,CAACwB,CAAH,GAAOC,MAAP,CAAc,SAAd,CAJG,EAKHzB,EAAE,CAAC0B,CAAH,GAAOD,MAAP,CAAc,iBAAd,CALG,EAMHzB,EAAE,CAAC2B,IAAH,GAAUF,MAAV,CAAiB,6BAAjB,EACUG,MADV,CACiB;AAACC,IAAAA,aAAa,EAAE;AAAhB,GADjB,CANG,EAQH7B,EAAE,CAAC8B,KAAH,GAAWC,MAAX,CAAkB,QAAlB,EACUH,MADV,CACiB;AAACC,IAAAA,aAAa,EAAE;AAAhB,GADjB,CARG,EAUH7B,EAAE,CAACgC,OAAH,GAAaC,EAAb,CAAgBlB,UAAhB,EAA4BmB,KAA5B,CAAkC,GAAlC,CAVG,EAWHlC,EAAE,CAACL,OAAH,CAAW,CAAC,iBAAD,EAAoB,SAApB,EAA+B,6BAA/B,EAA8D,QAA9D,CAAX,CAXG,EAaJwC,KAbI,CAaE,GAbF,EAcJC,MAdI,CAcG,GAdH,EAeJC,MAfI,GAgBJ9B,IAhBI,CAgBC,UAAA+B,WAAW,EAAI;AACnBC,IAAAA,QAAQ,CAACC,cAAT,CAAwB,MAAxB,EAAgCC,WAAhC,CAA4CH,WAA5C;AACD,GAlBI,CAAP;AAmBD","file":"econ.bc207a97.js","sourceRoot":"../src","sourcesContent":["/** Wenxuan Qi\n * Economy + Trust vs Happiness Score\n * The above code is the original code in this file.\n */ \nimport happinessData from '../static/happiness_percentage1.csv'\n\"use strict\";\n\nvar happinessArray = [];\nvar yearSet = [];\nconst options = {\n  config: {\n    // Vega-Lite default configuration\n  },\n  init: (view) => {\n    // initialize tooltip handler\n    view.tooltip(new vegaTooltip.Handler().call);\n  },\n  view: {\n    // view constructor options\n    // remove the loader if you don't want to default to vega-datasets!\n    //   loader: vega.loader({\n    //     baseURL: \"\",\n    //   }),\n    renderer: \"canvas\",\n  },\n};\n\nvl.register(vega, vegaLite, options);\n\nd3.csv(happinessData).then(function(data){\n  data.forEach(function(d) {\n    happinessArray.push(d);\n    if (!yearSet.includes(d.year)) {\n      yearSet.push(d.year);\n    }\n  })\n  drawScatterVegaLite();\n})\n\nfunction drawScatterVegaLite() {\n  const selection2 = vl.selectSingle('happiness')\n    .fields('year')\n    .init({year: yearSet[0]})\n    .bind(vl.radio(yearSet));\n  \n  return vl.markPoint({filled:true})\n    .data(happinessArray)\n    .select(selection2)\n    .encode(\n      vl.x().fieldQ('Economy'),\n      vl.y().fieldQ('Happiness_Score'),\n      vl.size().fieldQ('Trust_Government_Corruption')\n               .legend({symbolOpacity: 0.7}),\n      vl.color().fieldN('Region')\n               .legend({symbolOpacity: 1}),\n      vl.opacity().if(selection2).value(0.1),\n      vl.tooltip(['Happiness_Score', 'Economy', 'Trust_Government_Corruption', 'Region'])\n    )\n    .width(500)\n    .height(300)\n    .render()\n    .then(viewElement => {\n      document.getElementById('view').appendChild(viewElement);\n    });\n}\n"]}